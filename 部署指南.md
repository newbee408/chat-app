# ðŸš€ äº‘æœåŠ¡å™¨éƒ¨ç½² - å®Œæ•´æŒ‡å—

## å½“å‰é…ç½®
- æœåŠ¡å™¨IP: **38.123.103.120**
- ç«¯å£: **8080** (å·²ä¿®æ”¹ï¼Œé¿å…3000å†²çª)
- ç³»ç»Ÿ: Ubuntu
- è®¤è¯: SSHå¯†é’¥

---

## ðŸŽ¯ æœ€ç®€å•çš„éƒ¨ç½²æ–¹æ³•ï¼ˆæŽ¨èï¼‰

### æ–¹æ³•Aï¼šä½¿ç”¨WinSCPå›¾å½¢åŒ–å·¥å…·ï¼ˆé›¶å‘½ä»¤è¡Œï¼‰

#### 1. ä¸‹è½½å®‰è£…WinSCP
- å®˜ç½‘: https://winscp.net/eng/download.php
- ä¸‹è½½å…è´¹ç‰ˆå³å¯

#### 2. é…ç½®è¿žæŽ¥
æ‰“å¼€WinSCPï¼Œæ–°å»ºç«™ç‚¹ï¼š
- **æ–‡ä»¶åè®®**: SFTP
- **ä¸»æœºå**: 38.123.103.120
- **ç«¯å£å·**: 22
- **ç”¨æˆ·å**: root
- **å¯†ç **: ç•™ç©º
- ç‚¹å‡»"é«˜çº§" â†’ "SSH" â†’ "éªŒè¯" â†’ é€‰æ‹©ä½ çš„SSHç§é’¥æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ .pem æˆ– .ppk æ–‡ä»¶ï¼‰

#### 3. è¿žæŽ¥å¹¶ä¸Šä¼ 
- ç‚¹å‡»"ç™»å½•"
- å·¦ä¾§æ˜¯æœ¬åœ°ç”µè„‘ï¼Œå³ä¾§æ˜¯æœåŠ¡å™¨
- åœ¨å³ä¾§è¿›å…¥ `/root` ç›®å½•
- ä»Žå·¦ä¾§æ‰¾åˆ°æ¡Œé¢çš„ `chat-app` æ–‡ä»¶å¤¹
- **åˆ é™¤æœ¬åœ°çš„ node_modules æ–‡ä»¶å¤¹**ï¼ˆå¦‚æžœæœ‰ï¼‰
- æ‹–æ‹½ `chat-app` æ–‡ä»¶å¤¹åˆ°å³ä¾§æœåŠ¡å™¨

#### 4. æ‰“å¼€SSHç»ˆç«¯
åœ¨WinSCPä¸­ï¼š
- ç‚¹å‡»é¡¶éƒ¨èœå• "å‘½ä»¤" â†’ "æ‰“å¼€ç»ˆç«¯"
- æˆ–æŒ‰å¿«æ·é”® Ctrl+T

#### 5. æ‰§è¡Œéƒ¨ç½²å‘½ä»¤
åœ¨ç»ˆç«¯ä¸­ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼ˆä¸€æ¬¡æ€§å¤åˆ¶ç²˜è´´ï¼‰ï¼š

```bash
cd /root/chat-app && \
npm install --production && \
npm install -g pm2 && \
pm2 delete chat-app 2>/dev/null || true && \
pm2 start ecosystem.config.json && \
pm2 save && \
pm2 startup && \
sudo ufw allow 8080/tcp 2>/dev/null || true && \
echo "" && \
echo "âœ… éƒ¨ç½²å®Œæˆï¼" && \
echo "ðŸŒ è®¿é—®åœ°å€: http://38.123.103.120:8080" && \
pm2 status
```

#### 6. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://38.123.103.120:8080**

---

### æ–¹æ³•Bï¼šä½¿ç”¨PowerShell + SSHå¯†é’¥

#### 1. æ‰¾åˆ°ä½ çš„SSHå¯†é’¥æ–‡ä»¶
å¸¸è§ä½ç½®ï¼š
- `C:\Users\ä½ çš„ç”¨æˆ·å\.ssh\id_rsa`
- æˆ–äº‘æœåŠ¡å•†æä¾›çš„ `.pem` æ–‡ä»¶

#### 2. è®¾ç½®å¯†é’¥æƒé™ï¼ˆå¦‚æžœæ˜¯.pemæ–‡ä»¶ï¼‰
```powershell
# å‡è®¾å¯†é’¥æ–‡ä»¶åœ¨æ¡Œé¢
$keyFile = "$HOME\Desktop\your-key.pem"
icacls $keyFile /inheritance:r
icacls $keyFile /grant:r "$($env:USERNAME):(R)"
```

#### 3. æµ‹è¯•SSHè¿žæŽ¥
```powershell
ssh -i "$HOME\Desktop\your-key.pem" root@38.123.103.120
```

#### 4. å¦‚æžœè¿žæŽ¥æˆåŠŸï¼Œä½¿ç”¨éƒ¨ç½²è„šæœ¬
```powershell
cd "$HOME\Desktop\chat-app"
.\deploy.ps1
```

---

### æ–¹æ³•Cï¼šæ‰‹åŠ¨SSHéƒ¨ç½²ï¼ˆæœ€å¯é ï¼‰

#### 1. è¿žæŽ¥åˆ°æœåŠ¡å™¨
```bash
ssh root@38.123.103.120
# æˆ–æŒ‡å®šå¯†é’¥æ–‡ä»¶
ssh -i /path/to/your-key.pem root@38.123.103.120
```

#### 2. åœ¨æœåŠ¡å™¨ä¸Šç›´æŽ¥ä¸‹è½½é¡¹ç›®ï¼ˆä½¿ç”¨Gitï¼‰
```bash
# å¦‚æžœä½ æŠŠé¡¹ç›®ä¸Šä¼ åˆ°äº†GitHub
cd /root
git clone https://github.com/ä½ çš„ç”¨æˆ·å/chat-app.git
cd chat-app
```

#### 3. æˆ–è€…æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶
å¦‚æžœæ— æ³•ä¸Šä¼ ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ï¼š

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /root/chat-app/public
cd /root/chat-app

# åˆ›å»ºpackage.json
cat > package.json << 'EOF'
{
  "name": "chat-app",
  "version": "1.0.0",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^5.2.1",
    "socket.io": "^4.8.3"
  }
}
EOF

# ç„¶åŽä½¿ç”¨nanoæˆ–viç¼–è¾‘å™¨åˆ›å»ºå…¶ä»–æ–‡ä»¶
nano server.js
# ç²˜è´´server.jsçš„å†…å®¹ï¼ŒCtrl+Xä¿å­˜

nano public/index.html
# ç²˜è´´index.htmlçš„å†…å®¹

nano public/style.css
# ç²˜è´´style.cssçš„å†…å®¹

nano public/app.js
# ç²˜è´´app.jsçš„å†…å®¹

nano ecosystem.config.json
# ç²˜è´´PM2é…ç½®
```

#### 4. å®‰è£…å’Œè¿è¡Œ
```bash
npm install --production
npm install -g pm2
pm2 start ecosystem.config.json
pm2 save
pm2 startup
sudo ufw allow 8080/tcp
```

---

## âš ï¸ é‡è¦ï¼šäº‘æœåŠ¡å•†å®‰å…¨ç»„é…ç½®

**å¿…é¡»åœ¨äº‘æœåŠ¡å•†æŽ§åˆ¶å°å¼€æ”¾8080ç«¯å£ï¼**

### é˜¿é‡Œäº‘
1. ç™»å½•é˜¿é‡Œäº‘æŽ§åˆ¶å°
2. è¿›å…¥ ECS å®žä¾‹
3. å®‰å…¨ç»„ â†’ é…ç½®è§„åˆ™ â†’ æ·»åŠ å®‰å…¨ç»„è§„åˆ™
4. ç«¯å£èŒƒå›´: 8080/8080
5. æŽˆæƒå¯¹è±¡: 0.0.0.0/0

### è…¾è®¯äº‘
1. ç™»å½•è…¾è®¯äº‘æŽ§åˆ¶å°
2. äº‘æœåŠ¡å™¨ â†’ å®‰å…¨ç»„
3. æ·»åŠ å…¥ç«™è§„åˆ™
4. ç±»åž‹: è‡ªå®šä¹‰TCP
5. ç«¯å£: 8080
6. æ¥æº: 0.0.0.0/0

### AWS
1. EC2 â†’ Security Groups
2. Inbound rules â†’ Edit
3. Add rule: Custom TCP, Port 8080, Source 0.0.0.0/0

### å…¶ä»–äº‘æœåŠ¡å•†
æŸ¥æ‰¾"å®‰å…¨ç»„"æˆ–"é˜²ç«å¢™è§„åˆ™"ï¼Œå¼€æ”¾TCP 8080ç«¯å£

---

## ðŸ“Š éƒ¨ç½²åŽæ£€æŸ¥æ¸…å•

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# âœ… æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
pm2 status

# âœ… æŸ¥çœ‹æ—¥å¿—
pm2 logs chat-app --lines 20

# âœ… æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tlnp | grep 8080

# âœ… æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# âœ… æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:8080

# âœ… æŸ¥çœ‹è¿›ç¨‹
ps aux | grep node
```

---

## ðŸ”§ æ•…éšœæŽ’æŸ¥

### é—®é¢˜1: æ— æ³•SSHè¿žæŽ¥
```bash
# æ£€æŸ¥SSHå¯†é’¥æƒé™
chmod 600 /path/to/your-key.pem

# ä½¿ç”¨è¯¦ç»†æ¨¡å¼æŸ¥çœ‹é”™è¯¯
ssh -v root@38.123.103.120
```

### é—®é¢˜2: æµè§ˆå™¨æ— æ³•è®¿é—®
1. æ£€æŸ¥äº‘æœåŠ¡å•†å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾8080
2. æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™: `sudo ufw status`
3. æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ: `pm2 status`
4. æŸ¥çœ‹åº”ç”¨æ—¥å¿—: `pm2 logs chat-app`

### é—®é¢˜3: PM2å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
pm2 logs chat-app

# å°è¯•ç›´æŽ¥è¿è¡Œ
cd /root/chat-app
node server.js
# çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
```

### é—®é¢˜4: ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜é‡è¯•
npm cache clean --force
rm -rf node_modules
npm install --production
```

---

## ðŸ“ž éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œæä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. SSHè¿žæŽ¥æ˜¯å¦æˆåŠŸï¼Ÿ
2. æ–‡ä»¶æ˜¯å¦ä¸Šä¼ å®Œæ•´ï¼Ÿ
3. `pm2 status` çš„è¾“å‡º
4. `pm2 logs chat-app` çš„é”™è¯¯ä¿¡æ¯
5. äº‘æœåŠ¡å•†å®‰å…¨ç»„æ˜¯å¦é…ç½®ï¼Ÿ

---

## ðŸŽ‰ æˆåŠŸæ ‡å¿—

å½“ä½ çœ‹åˆ°ï¼š
- âœ… PM2æ˜¾ç¤ºåº”ç”¨çŠ¶æ€ä¸º "online"
- âœ… æµè§ˆå™¨èƒ½è®¿é—® http://38.123.103.120:8080
- âœ… èƒ½çœ‹åˆ°ç™»å½•ç•Œé¢
- âœ… èƒ½å‘é€æ¶ˆæ¯

æ­å–œéƒ¨ç½²æˆåŠŸï¼ðŸŽŠ
